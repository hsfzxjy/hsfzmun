{"version":3,"sources":["router.js"],"names":["Router","_init","$","extend","prototype","url","params","_eventBus","window","on","_fireRouteEvent","bind","first","Url","location","href","path","query","emit","console","log","go","title","trigger","history","pushState","route","cb","router"],"mappings":";;;;;;;;;;;;;;;AAKA;;AAEA,aAASA,MAAT,GAAmB;AAAE,aAAKC,KAAL;AAAc;;AAEnCC,MAAEC,MAAF,CAASH,OAAOI,SAAhB,EAA2B;AAEvBH,aAFuB,mBAEd;AAAA;;AACL,iBAAKI,GAAL,GAAW,EAAX;AACA,iBAAKC,MAAL,GAAc,EAAd;AACA,iBAAKC,SAAL,GAAiB,sBAAjB;AACA;AACAL,cAAEM,MAAF,EAAUC,EAAV,CAAa,UAAb,EAAyB,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAzB;AACA;AACAT,cAAE;AAAA,uBAAM,MAAKQ,eAAL,CAAqB,IAArB,CAAN;AAAA,aAAF;AACH,SAVsB;AAYvBA,uBAZuB,6BAYS;AAAA,gBAAfE,KAAe,uEAAP,KAAO;;AAC5B,gBAAIP,MAAM,IAAIQ,GAAJ,CAAQC,SAASC,IAAjB,CAAV;AACA,iBAAKV,GAAL,GAAWA,IAAIW,IAAf;AACA,iBAAKV,MAAL,GAAcD,IAAIY,KAAlB;AACA,iBAAKV,SAAL,CAAeW,IAAf,CAAoB,OAApB,EAA6B,CAAC,KAAKb,GAAN,EAAW,KAAKC,MAAhB,EAAwBM,KAAxB,CAA7B;AACAO,oBAAQC,GAAR,CAAY,MAAZ;AACH,SAlBsB;AAoBvBC,UApBuB,cAoBnBhB,GApBmB,EAoBc;AAAA,gBAA5BiB,KAA4B,uEAApB,EAAoB;AAAA,gBAAhBC,OAAgB,uEAAN,IAAM;;AACjCJ,oBAAQC,GAAR,CAAY,IAAZ,EAAkBf,GAAlB;AACAmB,oBAAQC,SAAR,CAAkB,IAAlB,EAAwBH,KAAxB,EAA+BjB,GAA/B;AACA,gBAAIkB,OAAJ,EAAa,KAAKb,eAAL;AAChB,SAxBsB;AA0BvBgB,aA1BuB,iBA0BhBC,EA1BgB,EA0BZ;AACPR,oBAAQC,GAAR,CAAY,MAAZ;AACA,iBAAKb,SAAL,CAAeE,EAAf,CAAkB,OAAlB,EAA2BkB,EAA3B;AACA,mBAAO,IAAP;AACH;AA9BsB,KAA3B;;AAiCA,QAAIC,SAAS,IAAI5B,MAAJ,EAAb;;sBAEe4B,M","file":"../../util/router.js","sourcesContent":["import 'urllib'\n\nimport EventEmitter from 'util/events'\nimport 'jquery'\n\n// `Router` Class Definition\n\nfunction Router () { this._init() }\n\n$.extend(Router.prototype, {\n\n    _init () {\n        this.url = ''\n        this.params = {}\n        this._eventBus = new EventEmitter()\n        // Listen `popstate` event\n        $(window).on('popstate', this._fireRouteEvent.bind(this))\n        // Trigger event when page loaded\n        $(() => this._fireRouteEvent(true))\n    },\n\n    _fireRouteEvent (first = false) {\n        let url = new Url(location.href)\n        this.url = url.path\n        this.params = url.query\n        this._eventBus.emit('route', [this.url, this.params, first])\n        console.log('fire')\n    },\n\n    go (url, title = '', trigger = true) {\n        console.log('go', url)\n        history.pushState(null, title, url)\n        if (trigger) this._fireRouteEvent()\n    },\n\n    route (cb) {\n        console.log('bind')\n        this._eventBus.on('route', cb)\n        return this\n    }\n})\n\nlet router = new Router()\n\nexport default router\n"]}